# Source Code

## Project Overview

Source code here contains the implementation of the "Probes" component of the framework. It includes the probes script, which serves as the core executable for extracting data, and defines the overall structure of each probe. Additionally, the expected output of each probe is also defined here.

## Folder Structure

- **`outputs/`** – Stores the JSON output generated by each probe. These outputs follow a format defined while probe registration to ensure consistency of the framework.
- **`probes/`** – Contains the implementation scripts for individual probes. Each script defines the logic for data collection.
- **`probes_structures/`** – Defines the structure of each probe for proper registration on the **SST server**.
- **`utils/`** – Contains helper functions and utility classes that are used across different parts of the codebase. These utilities helps in common tasks such as data processing and file handling.

## Requirements

- Python
- python3-venv

## How to Run

1. **Environment File**

Add .env environment file in the current folder and add following key in it:

```bash
SST_API_URL=
```

2. **Create virtual environment**

```bash
python -m venv venv
```

3. **Activate virtual environment**

```bash
source venv/bin/activate
```

4. **Install packages**

Install the packages required to run current probes.

```bash
pip install -r requirements.txt
```

5. **Run the Probes**
   - Execute `runner.py` to run all registered probes from `probes_list.py` with following command.

```bash
python runner.py --SOURCE_DIR "/Project/spring-petclinic-microservices" --DIR_NAME "spring-petclinic-microservices"
```

- This will:
  - Generate the output for each probe in the `outputs/` folder.
  - Send the results to the **SST server** via a `POST` request.

**NOTE:** It is assumed here that the probe has already been registered in the SST server. To see further detail, review the [project report](https://github.com/WaqarAwan376/MEng-Project/tree/master/Report).

## How to add probes?

1. **Create the Probe Script**

   - Write a script that extracts data in **JSON format** from the project under maintenance.

2. **Place the Script**

   - Save the probe script in the `probes/` folder.

3. **Add Probe**

   - Open `probes_list.py` and add the probe details in the `probes_scripts` array:
     - **`runner_command`**: Defines the command to execute the script.
     - **`probe_file`**: Specifies the probe file name.
     - **`arguments`**: A list where each argument is followed by its value in sequence.

Now use the runner script to run all probes. Please make sure that the system contains the overall environment, libraries and packages required to run the additional probes.
